exports.Emotion = class Emotion
  mood_min = -15
  mood_max = 15
  mood_recovery = 0.5

  constructor: (@dictionary) -> @mood = 0

  adjust_mood: (val) ->
    @mood += val
    if @mood > mood_max
      @mood = mood_max
    else if @mood < mood_min
      @mood = mood_min

  update: (input) ->
    for ptn_item in @dictionary.pattern
      if input.match(ptn_item)
         @adjust_mood(ptn_item.modify)
        break
    if @mood < 0
      @mood += mood_recovery
    else if @mood > 0
      @mood -= mood_recovery

