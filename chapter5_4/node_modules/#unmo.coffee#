responder = require('responder')
dictionary = require('dictionary')

exports.Unmo = class Unmo
  constructor: (@name) ->
    @dictionary = new dictionary.Dictionary()
    @resp_random = new responder.RandomResponder('Random',@dictionary)
    @resp_what = new responder.WhatResponder('What')
    @resp_pattern = new responder.PatternResponder('Pattern',@dictionary)
    @responder = @resp_pattern

  responder_name: () -> @responder.name

  dialogue: (input) ->
    rand = Math.floor(Math.random() * 100)
    if rand >= 0 and rand < 60
      @responder = @resp_pattern
    else if rand < 90
      @responder = @resp_random
    else
      @resp_random = @resp_what
    @responder.response(input)
